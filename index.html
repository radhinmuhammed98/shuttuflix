<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ShuttuFlix</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #000; color: white; font-family: sans-serif; padding: 16px; }
    .search-box { width: 100%; padding: 12px; border-radius: 30px; border: 2px solid #ff0040; background: #222; color: white; font-size: 16px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 16px; margin-top: 20px; }
    .card { background: #1a1a1a; border-radius: 10px; overflow: hidden; }
    .poster { width: 100%; height: 200px; object-fit: cover; }
    .title { padding: 8px; font-size: 14px; text-align: center; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; }
    .modal.active { display: flex; align-items: center; justify-content: center; }
    .player-iframe { width: 95vw; max-width: 600px; height: 340px; border: none; }
    .close { position: absolute; top: 20px; right: 20px; color: white; font-size: 30px; cursor: pointer; }
  </style>
</head>
<body>
  <input type="text" id="search" class="search-box" placeholder="Search..." />
  <div id="grid" class="grid"></div>

  <div id="modal" class="modal">
    <span class="close" id="close">&times;</span>
    <iframe id="player" class="player-iframe" allowfullscreen></iframe>
  </div>

  <script>
    // ONLY movies confirmed to work on VidKing
    const MOVIES = [
      { id: 1078605, title: "Weapons", poster: "https://image.tmdb.org/t/p/w500/cpf7vsRZ0MYRQcnLWteD5jK9ymT.jpg" },
      { id: 278, title: "The Shawshank Redemption", poster: "https://image.tmdb.org/t/p/w500/9cqNxx0GxF0bflZmeSMuL5tnGzr.jpg" },
      { id: 238, title: "The Godfather", poster: "https://image.tmdb.org/t/p/w500/3bhkrj58Vtu7enYsRolD1fZdja1.jpg" },
      { id: 424, title: "Schindler's List", poster: "https://image.tmdb.org/t/p/w500/sF1U4EUQS8YHUYjNl3pMGNIQyr0.jpg" },
      { id: 66732, title: "Stranger Things", poster: "https://image.tmdb.org/t/p/w500/cVxVGwHce6xnW8UaVUggaPXbmoE.jpg" }
    ];

    const grid = document.getElementById('grid');
    const modal = document.getElementById('modal');
    const player = document.getElementById('player');
    const close = document.getElementById('close');
    const search = document.getElementById('search');

    function render(movies) {
      grid.innerHTML = movies.map(m => `
        <div class="card" onclick="openPlayer(${m.id})">
          <img class="poster" src="${m.poster}" />
          <div class="title">${m.title}</div>
        </div>
      `).join('');
    }

    function openPlayer(id) {
      player.src = `https://www.vidking.net/embed/movie/${id}?autoPlay=true&color=ff0000`;
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    close.onclick = () => {
      modal.classList.remove('active');
      document.body.style.overflow = 'auto';
      player.src = '';
    };

    search.oninput = (e) => {
      const q = e.target.value.trim().toLowerCase();
      if (q === '') return render(MOVIES);
      const filtered = MOVIES.filter(m => m.title.toLowerCase().includes(q));
      render(filtered);
    };

    // Start
    render(MOVIES);
  </script>
</body>
</html>
